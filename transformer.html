<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Transformer å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶äº’åŠ¨æ•™å­¦</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 30px; line-height: 1.8; }
    h1 { color: #2c3e50; }
    .question { margin: 20px 0; }
    select, input[type="text"] { padding: 5px; margin-left: 10px; }
    .answer { display: none; margin-top: 10px; color: green; }
    button { margin-top: 10px; padding: 5px 10px; }
    code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>ğŸ§  Transformer å¤šå¤´è‡ªæ³¨æ„åŠ›æœºåˆ¶å®ç°æ•™å­¦</h1>
  <p>æœ¬èŠ‚è¯¾å°†å¸¦ä½ å®Œæˆ Transformer ä¸­çš„ <strong>Multi-Head Attention</strong> æ ¸å¿ƒå®ç°ï¼Œç†è§£å…¶å·¥ä½œåŸç†å¹¶è¡¥å…¨ä»£ç ã€‚</p>
  
  <h2>âœï¸ å¡«ç©ºç»ƒä¹ </h2>

  <!-- Question 1 -->
  <div class="question">
    <strong>(1) æ³¨æ„åŠ›å¾—åˆ†çš„è®¡ç®—ï¼š</strong><br>
    <code>scores = ?</code><br>
    <input type="text" id="input1" placeholder="è¯·è¾“å…¥ä»£ç ç‰‡æ®µ">
    <button onclick="checkAnswer(1, 'np.matmul(Q, K.transpose(0, 2, 1)) / np.sqrt(d_k)')">æ£€æŸ¥</button>
    <div class="answer" id="answer1"></div>
  </div>

  <!-- Question 2 -->
  <div class="question">
    <strong>(2) è¾“å‡ºæƒé‡çŸ©é˜µ <code>WO</code> çš„åˆå§‹åŒ–å½¢çŠ¶ï¼Ÿ</strong><br>
    <input type="text" id="input2" placeholder="å½¢å¦‚ (a, b)">
    <button onclick="checkAnswer(2, 'self.num_heads * self.head_dim, input_dim')">æ£€æŸ¥</button>
    <div class="answer" id="answer2"></div>
  </div>

  <!-- Question 3 -->
  <div class="question">
    <strong>(3) æ¯ä¸ªå¤´çš„ Query Q è®¡ç®—ä»£ç ï¼Ÿ</strong><br>
    <input type="text" id="input3" placeholder="å¦‚ np.matmul(X, ...)" size="50">
    <button onclick="checkAnswer(3, 'np.matmul(X, self.WQ[i])')">æ£€æŸ¥</button>
    <div class="answer" id="answer3"></div>
  </div>

  <!-- Question 4 -->
  <div class="question">
    <strong>(4) æ¯ä¸ªå¤´çš„ Key K è®¡ç®—ä»£ç ï¼Ÿ</strong><br>
    <input type="text" id="input4" placeholder="å¦‚ np.matmul(X, ...)" size="50">
    <button onclick="checkAnswer(4, 'np.matmul(X, self.WK[i])')">æ£€æŸ¥</button>
    <div class="answer" id="answer4"></div>
  </div>

  <!-- Question 5 -->
  <div class="question">
    <strong>(5) æ¯ä¸ªå¤´çš„ Value V è®¡ç®—ä»£ç ï¼Ÿ</strong><br>
    <input type="text" id="input5" placeholder="å¦‚ np.matmul(X, ...)" size="50">
    <button onclick="checkAnswer(5, 'np.matmul(X, self.WV[i])')">æ£€æŸ¥</button>
    <div class="answer" id="answer5"></div>
  </div>

  <script>
    function checkAnswer(id, expected) {
      const input = document.getElementById('input' + id).value.trim().replace(/\s+/g, '');
      const expectedNormalized = expected.replace(/\s+/g, '');
      const result = document.getElementById('answer' + id);
      if (input === expectedNormalized) {
        result.innerHTML = 'âœ… æ­£ç¡®ï¼';
        result.style.color = 'green';
      } else {
        result.innerHTML = 'âŒ é”™è¯¯ï¼Œå‚è€ƒç­”æ¡ˆï¼š<code>' + expected + '</code>';
        result.style.color = 'red';
      }
      result.style.display = 'block';
    }
  </script>
</body>
</html>
